(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26e4b776"],{"2be3":function(e,t,n){"use strict";n("bbc3")},a55b:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"theme"},["ADMIN"===e.$store.state.userStore.identity?n("v-container",{staticStyle:{"max-width":"1500px"}},[n("UserTable")],1):n("v-container",{staticClass:"d-flex flex-column justify-center align-center"},[n("h2",[e._v("Not Accessible")])])],1)},i=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-data-table",{staticClass:"elevation-5 my-5",attrs:{headers:e.headers,items:e.users,"sort-by":"username"},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:""}},[n("v-toolbar-title",[e._v("人員管理列表")]),n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),n("v-spacer"),n("v-dialog",{attrs:{"max-width":"500px",persistent:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,i=t.attrs;return[n("v-btn",e._g(e._b({attrs:{color:"info mr-5",dark:""}},"v-btn",i,!1),r),[e._v(" New User ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-form",{ref:"form"},[n("v-card",[n("v-card-title",[n("span",{staticClass:"text-h5"},[e._v(e._s(e.formTitle))])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-text-field",{attrs:{label:"Username*",type:"text",rules:e.usernameRules,required:"",dense:"","prepend-icon":"mdi-account-circle"},model:{value:e.editedItem.username,callback:function(t){e.$set(e.editedItem,"username",t)},expression:"editedItem.username"}})],1),n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-select",{attrs:{label:"Identity*",items:["ADMIN","STAFF","CUSTOMER"],required:"",dense:"","prepend-icon":"mdi-account-group"},model:{value:e.editedItem.identity,callback:function(t){e.$set(e.editedItem,"identity",t)},expression:"editedItem.identity"}})],1),-1===e.editedIndex?n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-text-field",{attrs:{label:"Password*",type:"password",rules:e.passwordRules,required:"",dense:"","prepend-icon":"mdi-lock"},model:{value:e.editedItem.password,callback:function(t){e.$set(e.editedItem,"password",t)},expression:"editedItem.password"}})],1):e._e(),n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-text-field",{attrs:{label:"Email*",type:"email",rules:e.emailRules,required:"",dense:"","prepend-icon":"mdi-email"},model:{value:e.editedItem.email,callback:function(t){e.$set(e.editedItem,"email",t)},expression:"editedItem.email"}})],1),n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-text-field",{attrs:{label:"Phone number*",type:"tel",rules:e.phoneRules,required:"",dense:"","prepend-icon":"mdi-cellphone"},model:{value:e.editedItem.phone,callback:function(t){e.$set(e.editedItem,"phone",t)},expression:"editedItem.phone"}})],1),n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-text-field",{attrs:{label:"Credit card",type:"text",rules:e.creditCardRules,dense:"","prepend-icon":"mdi-credit-card"},model:{value:e.editedItem.creditCard,callback:function(t){e.$set(e.editedItem,"creditCard",t)},expression:"editedItem.creditCard"}})],1),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Address",type:"text",rules:e.addressRules,dense:"","prepend-icon":"mdi-map-marker"},model:{value:e.editedItem.address,callback:function(t){e.$set(e.editedItem,"address",t)},expression:"editedItem.address"}})],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.close(),e.reset()}}},[e._v(" Cancel ")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.save(),e.reset()}}},[e._v(" Save ")])],1)],1)],1)],1),n("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[n("div",{staticClass:"text-center"},[n("v-sheet",{staticClass:"px-7 pt-7 pb-4 mx-auto text-center d-inline-block",attrs:{color:"blue-grey darken-3",dark:""}},[n("div",{staticClass:"grey--text text--lighten-1 text-h5 mb-4"},[e._v(" Are you sure to delete this user? ")]),n("v-btn",{staticClass:"ma-1",attrs:{disabled:e.loading,color:"grey",plain:""},on:{click:e.closeDelete}},[e._v(" Cancel ")]),n("v-btn",{staticClass:"ma-1",attrs:{loading:e.loading,color:"error",plain:""},on:{click:e.deleteItemConfirm}},[e._v(" Delete ")])],1)],1)])],1)]},proxy:!0},{key:"item.identity",fn:function(t){var r=t.item;return[n("v-chip",{staticClass:"py-3 my-4",attrs:{color:e.getColor(r.identity),label:"","x-small":"",dark:""}},[e._v(" "+e._s(r.identity)+" ")])]}},{key:"item.actions",fn:function(t){var r=t.item;return[n("v-icon",{staticClass:"mr-2",on:{click:function(t){return e.editItem(r)}}},[e._v(" mdi-pencil ")]),n("v-icon",{on:{click:function(t){return e.deleteItem(r)}}},[e._v(" mdi-delete ")])]}}],null,!0)})},s=[],d=n("1da1"),l=(n("96cf"),n("ac1f"),n("00b4"),n("d3b7"),n("25f0"),n("37a2")),o={data:function(){return{loading:!1,dialog:!1,dialogDelete:!1,headers:[{text:"Username",align:"start",value:"username"},{text:"Identity",value:"identity"},{text:"Email",value:"email"},{text:"Phone",value:"phone"},{text:"Credit card",value:"creditCard"},{text:"Address",value:"address"},{text:"Actions",value:"actions",sortable:!1}],usernameRules:[function(e){return!!e||"欄位不可留空"},function(e){return/^[A-Za-z0-9]+$/.test(e)||"使用者名稱只能有英文字母或數字"}],passwordRules:[function(e){return!!e||"欄位不可留空"},function(e){return e&&e.length>=6||"密碼至少需有 6 個字元"}],phoneRules:[function(e){return!!e||"欄位不可留空"},function(e){return/^\d+$/.test(e)||"電話只能包含數字"}],emailRules:[function(e){return!!e||"欄位不可留空"},function(e){return/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e)||"電子郵件格式不符"}],creditCardRules:[],addressRules:[],users:[],editedIndex:-1,editedItem:{id:-1,username:null,identity:null,password:null,email:null,phone:null,creditCard:null,address:null},defaultItem:{id:-1,username:null,identity:"CUSTOMER",password:null,email:null,phone:null,creditCard:null,address:null}}},computed:{formTitle:function(){return-1===this.editedIndex?"New User":"Edit User"}},watch:{dialog:function(e){e||this.close()},dialogDelete:function(e){e||this.closeDelete()}},mounted:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["c"])();case 2:e.users=t.sent;case 3:case"end":return t.stop()}}),t)})))()},methods:{getColor:function(e){return"ADMIN"===e?"pink":"STAFF"===e?"orange":"green"},validate:function(){this.$refs.form.validate()},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},refresh:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["c"])();case 2:e.users=t.sent;case 3:case"end":return t.stop()}}),t)})))()},editItem:function(e){this.editedIndex=this.users.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){this.editedIndex=this.users.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,Object(l["b"])(e.users[e.editedIndex].id);case 3:return t.next=5,new Promise((function(e){return setTimeout(e,1e3)}));case 5:return e.loading=!1,t.next=8,e.refresh();case 8:e.closeDelete();case 9:case"end":return t.stop()}}),t)})))()},close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},closeDelete:function(){var e=this;this.dialogDelete=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},save:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=["ADMIN","STAFF","CUSTOMER"],r=n.indexOf(e.editedItem.identity).toString(),!(e.editedIndex>-1)){t.next=8;break}return Object.assign(e.users[e.editedIndex],e.editedItem),t.next=6,Object(l["e"])(e.editedItem.id,e.editedItem.username,r,e.editedItem.phone,e.editedItem.email,e.editedItem.creditCard,e.editedItem.address);case 6:t.next=10;break;case 8:return t.next=10,Object(l["a"])(e.editedItem.username,r,e.editedItem.password,e.editedItem.phone,e.editedItem.email,e.editedItem.creditCard,e.editedItem.address);case 10:return t.next=12,e.refresh();case 12:e.close();case 13:case"end":return t.stop()}}),t)})))()}}},c=o,u=n("2877"),m=n("6544"),f=n.n(m),v=n("8336"),p=n("b0af"),x=n("99d9"),b=n("cc20"),h=n("62ad"),I=n("a523"),g=n("8fea"),C=n("169a"),k=n("ce7e"),w=n("4bd4"),y=n("132d"),R=n("0fd9"),_=n("b974"),V=n("8dd9"),O=n("2fa4"),T=n("8654"),D=n("71d9"),$=n("2a7f"),A=Object(u["a"])(c,a,s,!1,null,null,null),j=A.exports;f()(A,{VBtn:v["a"],VCard:p["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:x["c"],VChip:b["a"],VCol:h["a"],VContainer:I["a"],VDataTable:g["a"],VDialog:C["a"],VDivider:k["a"],VForm:w["a"],VIcon:y["a"],VRow:R["a"],VSelect:_["a"],VSheet:V["a"],VSpacer:O["a"],VTextField:T["a"],VToolbar:D["a"],VToolbarTitle:$["a"]});var S={name:"Admin",components:{UserTable:j}},U=S,E=(n("2be3"),Object(u["a"])(U,r,i,!1,null,null,null));t["default"]=E.exports;f()(E,{VContainer:I["a"]})},bbc3:function(e,t,n){}}]);
//# sourceMappingURL=chunk-26e4b776.926e61ff.js.map